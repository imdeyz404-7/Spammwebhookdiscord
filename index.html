<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZYREX Executor</title>
<style>
body{margin:0;font-family:Arial;background:#020617;color:#fff}
.card{max-width:420px;margin:20px auto;background:#020617;padding:20px;border-radius:16px;box-shadow:0 0 30px rgba(0,0,0,.6)}
input,button{width:100%;padding:14px;margin-top:10px;border-radius:12px;border:none;font-size:15px}
button{font-weight:bold;cursor:pointer}
.unlock{background:#2563eb;color:#fff}
.login{background:#7c3aed;color:#fff}
.start{background:#22c55e}
.stop{background:#ef4444}
.status{text-align:center;font-weight:bold;margin-top:10px}
.toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);padding:12px 20px;border-radius:12px;display:none}
</style>
</head>
<body>

<div class="card">
<h2>üîê Key System</h2>
<input id="keyInput" placeholder="Masukkan Key">
<button class="unlock" onclick="loginKey()">UNLOCK</button>
<div id="keyStatus" class="status"></div>
<div id="expireText" class="status"></div>
</div>

<div class="card" id="executor" style="display:none">
<h2>üöÄ Executor</h2>
<input id="url" placeholder="Webhook URL">
<input id="msg" placeholder="Pesan">
<input id="delay" type="number" value="2000">
<button class="start" onclick="start()">START</button>
<button class="stop" onclick="stop()">STOP</button>
<div id="runStatus" class="status">OFF</div>
</div>

<div class="card">
<h2>üõ† Admin Panel</h2>
<input id="adminPass" placeholder="Admin Password">
<button class="login" onclick="adminLogin()">LOGIN</button>

<div id="adminPanel" style="display:none">
<input id="expireDays" type="number" placeholder="Expired (hari)">
<button class="unlock" onclick="createKey()">CREATE KEY</button>
<div id="keyList"></div>
</div>
</div>

<div id="toast" class="toast"></div>

<script>
const ADMIN_PASSWORD="admin123";
const STORAGE_KEY="ZYREX_KEYS";
let interval=null;

function getKeys(){return JSON.parse(localStorage.getItem(STORAGE_KEY))||[]}
function saveKeys(k){localStorage.setItem(STORAGE_KEY,JSON.stringify(k))}

function toast(msg,ok=true){
 const t=document.getElementById("toast");
 t.textContent=msg;
 t.style.background=ok?"#22c55e":"#ef4444";
 t.style.display="block";
 setTimeout(()=>t.style.display="none",2000);
}

function adminLogin(){
 if(adminPass.value!==ADMIN_PASSWORD)return toast("Admin salah",false);
 adminPanel.style.display="block";toast("Admin login");
 renderKeyList();
}

function createKey(){
 const d=parseInt(expireDays.value);
 if(!d||d<1)return toast("Hari invalid",false);
 const key="ZYREX-"+Math.random().toString(36).substring(2,8).toUpperCase();
 const exp=Date.now()+d*86400000;
 const k=getKeys();k.push({key:key,expire:exp});saveKeys(k);
 toast("Key dibuat");renderKeyList();
}

function renderKeyList(){
 keyList.innerHTML="";
 getKeys().forEach(k=>{
  const s=Math.ceil((k.expire-Date.now())/86400000);
  keyList.innerHTML+=`<b>${k.key}</b><br>Expired: ${s>0?s+" hari":"EXPIRED"}<hr>`;
 });
}

function loginKey(){
 const k=getKeys().find(x=>x.key===keyInput.value);
 if(!k)return toast("Key tidak ada",false);
 if(Date.now()>k.expire)return toast("Key expired",false);
 const s=Math.ceil((k.expire-Date.now())/86400000);
 keyStatus.textContent="KEY VALID";
 expireText.textContent="Expired "+s+" hari";
 executor.style.display="block";
 toast("Login sukses");
}

function start(){
 if(interval)return;
 const u=url.value,m=msg.value,d=parseInt(delay.value);
 if(!u||!m)return toast("Isi data",false);
 interval=setInterval(()=>fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:m})}),d);
 runStatus.textContent="ON";runStatus.style.color="#22c55e";
}

function stop(){
 clearInterval(interval);interval=null;
 runStatus.textContent="OFF";runStatus.style.color="#ef4444";
}
</script>

</body>
</html>
